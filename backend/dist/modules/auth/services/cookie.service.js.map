{"version":3,"sources":["../../../../src/modules/auth/services/cookie.service.ts"],"sourcesContent":["import { Injectable } from \"@nestjs/common\";\r\nimport { ConfigService } from \"@nestjs/config\";\r\n\r\n@Injectable()\r\nexport class CookieService {\r\n  private readonly cookieConfigs: Record<\r\n    \"access\",\r\n    { name: string; maxAge: number }\r\n  >;\r\n  private readonly cookieDomain: string;\r\n\r\n  constructor(private readonly configService: ConfigService) {\r\n    this.cookieConfigs = {\r\n      access: {\r\n        name: configService.get<string>(\"ACCESS_TOKEN_COOKIE_NAME\")!,\r\n        maxAge: configService.get<number>(\"JWT_ACCESS_TOKEN_EXPIRATION_TIME\")!,\r\n      },\r\n    };\r\n    this.cookieDomain = configService.get<string>(\"COOKIE_DOMAIN\")!;\r\n  }\r\n\r\n  async generateCookie(token: string): Promise<string> {\r\n    const { name: cookieName, maxAge } = this.cookieConfigs[\"access\"];\r\n\r\n    return `${cookieName}=${token}; Domain=${this.cookieDomain}; Path=/; Max-Age=${Number(maxAge)}; HttpOnly;`;\r\n  }\r\n\r\n  async removeCookie(): Promise<string[]> {\r\n    const cookieNames = Object.values(this.cookieConfigs).map(\r\n      (config) => config.name\r\n    );\r\n    return cookieNames.map(\r\n      (cookieName) =>\r\n        `${cookieName}=; Domain=${this.cookieDomain}; Path=/; Max-Age=0; HttpOnly;`\r\n    );\r\n  }\r\n}\r\n"],"names":["CookieService","generateCookie","token","name","cookieName","maxAge","cookieConfigs","cookieDomain","Number","removeCookie","cookieNames","Object","values","map","config","configService","access","get"],"mappings":";;;;+BAIaA;;;eAAAA;;;wBAJc;wBACG;;;;;;;;;;AAGvB,IAAA,AAAMA,gBAAN,MAAMA;IAiBX,MAAMC,eAAeC,KAAa,EAAmB;QACnD,MAAM,EAAEC,MAAMC,UAAU,EAAEC,MAAM,EAAE,GAAG,IAAI,CAACC,aAAa,CAAC,SAAS;QAEjE,OAAO,GAAGF,WAAW,CAAC,EAAEF,MAAM,SAAS,EAAE,IAAI,CAACK,YAAY,CAAC,kBAAkB,EAAEC,OAAOH,QAAQ,WAAW,CAAC;IAC5G;IAEA,MAAMI,eAAkC;QACtC,MAAMC,cAAcC,OAAOC,MAAM,CAAC,IAAI,CAACN,aAAa,EAAEO,GAAG,CACvD,CAACC,SAAWA,OAAOX,IAAI;QAEzB,OAAOO,YAAYG,GAAG,CACpB,CAACT,aACC,GAAGA,WAAW,UAAU,EAAE,IAAI,CAACG,YAAY,CAAC,8BAA8B,CAAC;IAEjF;IAxBA,YAAY,AAAiBQ,aAA4B,CAAE;aAA9BA,gBAAAA;QAC3B,IAAI,CAACT,aAAa,GAAG;YACnBU,QAAQ;gBACNb,MAAMY,cAAcE,GAAG,CAAS;gBAChCZ,QAAQU,cAAcE,GAAG,CAAS;YACpC;QACF;QACA,IAAI,CAACV,YAAY,GAAGQ,cAAcE,GAAG,CAAS;IAChD;AAiBF"}