{
  "id": "4667c11e-b475-4cf1-acf9-7fa73ce7c2de",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.clinics": {
      "name": "clinics",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "clinics_code_idx": {
          "name": "clinics_code_idx",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "clinics_active_idx": {
          "name": "clinics_active_idx",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "clinics_code_unique": {
          "name": "clinics_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.doctors": {
      "name": "doctors",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "specialization": {
          "name": "specialization",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "day_of_week": {
          "name": "day_of_week",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "start_time": {
          "name": "start_time",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        },
        "end_time": {
          "name": "end_time",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        },
        "quota": {
          "name": "quota",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 30
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "doctors_code_idx": {
          "name": "doctors_code_idx",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "doctors_active_idx": {
          "name": "doctors_active_idx",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "doctors_code_unique": {
          "name": "doctors_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.patients": {
      "name": "patients",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "registration_number": {
          "name": "registration_number",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "nik": {
          "name": "nik",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "birth_date": {
          "name": "birth_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "gender": {
          "name": "gender",
          "type": "gender",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "phone": {
          "name": "phone",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "patient_type": {
          "name": "patient_type",
          "type": "patient_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "patient_class": {
          "name": "patient_class",
          "type": "patient_class",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "have_assurance": {
          "name": "have_assurance",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "assuranceCode": {
          "name": "assuranceCode",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "patients_nik_idx": {
          "name": "patients_nik_idx",
          "columns": [
            {
              "expression": "nik",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "patients_reg_number_idx": {
          "name": "patients_reg_number_idx",
          "columns": [
            {
              "expression": "registration_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "patients_code_unique": {
          "name": "patients_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        },
        "patients_registration_number_unique": {
          "name": "patients_registration_number_unique",
          "nullsNotDistinct": false,
          "columns": [
            "registration_number"
          ]
        },
        "patients_nik_unique": {
          "name": "patients_nik_unique",
          "nullsNotDistinct": false,
          "columns": [
            "nik"
          ]
        },
        "patients_assuranceCode_unique": {
          "name": "patients_assuranceCode_unique",
          "nullsNotDistinct": false,
          "columns": [
            "assuranceCode"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staff": {
      "name": "staff",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "clinic_id": {
          "name": "clinic_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "code": {
          "name": "code",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "loket_number": {
          "name": "loket_number",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "nik": {
          "name": "nik",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "username": {
          "name": "username",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "password_hash": {
          "name": "password_hash",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "phone": {
          "name": "phone",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_login_at": {
          "name": "last_login_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "staff_clinic_idx": {
          "name": "staff_clinic_idx",
          "columns": [
            {
              "expression": "clinic_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staff_code_idx": {
          "name": "staff_code_idx",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staff_active_idx": {
          "name": "staff_active_idx",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staff_clinic_id_clinics_id_fk": {
          "name": "staff_clinic_id_clinics_id_fk",
          "tableFrom": "staff",
          "tableTo": "clinics",
          "columnsFrom": [
            "clinic_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "staff_code_unique": {
          "name": "staff_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        },
        "staff_nik_unique": {
          "name": "staff_nik_unique",
          "nullsNotDistinct": false,
          "columns": [
            "nik"
          ]
        },
        "staff_username_unique": {
          "name": "staff_username_unique",
          "nullsNotDistinct": false,
          "columns": [
            "username"
          ]
        },
        "staff_email_unique": {
          "name": "staff_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.queue_calls": {
      "name": "queue_calls",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "queue_id": {
          "name": "queue_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "staff_id": {
          "name": "staff_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "called_at": {
          "name": "called_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "response_time": {
          "name": "response_time",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "queue_calls_queue_idx": {
          "name": "queue_calls_queue_idx",
          "columns": [
            {
              "expression": "queue_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "queue_calls_staff_idx": {
          "name": "queue_calls_staff_idx",
          "columns": [
            {
              "expression": "staff_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "queue_calls_queue_id_queues_id_fk": {
          "name": "queue_calls_queue_id_queues_id_fk",
          "tableFrom": "queue_calls",
          "tableTo": "queues",
          "columnsFrom": [
            "queue_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "queue_calls_staff_id_staff_id_fk": {
          "name": "queue_calls_staff_id_staff_id_fk",
          "tableFrom": "queue_calls",
          "tableTo": "staff",
          "columnsFrom": [
            "staff_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.queues": {
      "name": "queues",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "patient_id": {
          "name": "patient_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "clinic_id": {
          "name": "clinic_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "doctor_id": {
          "name": "doctor_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "staff_id": {
          "name": "staff_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "queue_number": {
          "name": "queue_number",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "queue_type": {
          "name": "queue_type",
          "type": "queue_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "priority": {
          "name": "priority",
          "type": "priority",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'Normal'"
        },
        "service_type": {
          "name": "service_type",
          "type": "service_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "reference_type": {
          "name": "reference_type",
          "type": "reference_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "chief_complaint": {
          "name": "chief_complaint",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "symptoms": {
          "name": "symptoms",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "symptoms_start_date": {
          "name": "symptoms_start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "previous_treatment": {
          "name": "previous_treatment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reservation_date": {
          "name": "reservation_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "preferred_time": {
          "name": "preferred_time",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "queue_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'Waiting'"
        },
        "called_at": {
          "name": "called_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "staff_notes": {
          "name": "staff_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cancellation_reason": {
          "name": "cancellation_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "queues_queue_number_idx": {
          "name": "queues_queue_number_idx",
          "columns": [
            {
              "expression": "queue_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "queues_status_idx": {
          "name": "queues_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "queues_type_idx": {
          "name": "queues_type_idx",
          "columns": [
            {
              "expression": "queue_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "queues_priority_idx": {
          "name": "queues_priority_idx",
          "columns": [
            {
              "expression": "priority",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "queues_clinic_idx": {
          "name": "queues_clinic_idx",
          "columns": [
            {
              "expression": "clinic_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "queues_date_idx": {
          "name": "queues_date_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "queues_status_clinic_idx": {
          "name": "queues_status_clinic_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "clinic_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "queues_reservation_date_idx": {
          "name": "queues_reservation_date_idx",
          "columns": [
            {
              "expression": "reservation_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "queues_patient_id_patients_id_fk": {
          "name": "queues_patient_id_patients_id_fk",
          "tableFrom": "queues",
          "tableTo": "patients",
          "columnsFrom": [
            "patient_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "queues_clinic_id_clinics_id_fk": {
          "name": "queues_clinic_id_clinics_id_fk",
          "tableFrom": "queues",
          "tableTo": "clinics",
          "columnsFrom": [
            "clinic_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "queues_doctor_id_doctors_id_fk": {
          "name": "queues_doctor_id_doctors_id_fk",
          "tableFrom": "queues",
          "tableTo": "doctors",
          "columnsFrom": [
            "doctor_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "queues_staff_id_staff_id_fk": {
          "name": "queues_staff_id_staff_id_fk",
          "tableFrom": "queues",
          "tableTo": "staff",
          "columnsFrom": [
            "staff_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "queues_queue_number_unique": {
          "name": "queues_queue_number_unique",
          "nullsNotDistinct": false,
          "columns": [
            "queue_number"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.gender": {
      "name": "gender",
      "schema": "public",
      "values": [
        "L",
        "P"
      ]
    },
    "public.patient_class": {
      "name": "patient_class",
      "schema": "public",
      "values": [
        "Kelas 3",
        "Kelas 2",
        "Kelas 1",
        "VIP"
      ]
    },
    "public.patient_type": {
      "name": "patient_type",
      "schema": "public",
      "values": [
        "Umum",
        "Asuransi",
        "Rujukan"
      ]
    },
    "public.priority": {
      "name": "priority",
      "schema": "public",
      "values": [
        "Normal",
        "Urgent",
        "Emergency"
      ]
    },
    "public.queue_status": {
      "name": "queue_status",
      "schema": "public",
      "values": [
        "Draft",
        "Waiting",
        "Called",
        "On-Hold",
        "Done",
        "Cancelled"
      ]
    },
    "public.queue_type": {
      "name": "queue_type",
      "schema": "public",
      "values": [
        "Reservasi",
        "Walk-In"
      ]
    },
    "public.reference_type": {
      "name": "reference_type",
      "schema": "public",
      "values": [
        "Konsultasi",
        "Checkup",
        "Perawatan",
        "Lab",
        "Radiologi",
        "Vaksin",
        "Operasi"
      ]
    },
    "public.service_type": {
      "name": "service_type",
      "schema": "public",
      "values": [
        "Rawat Jalan",
        "Rawat Inap",
        "UGD"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.dashboard_summary": {
      "columns": {},
      "definition": "select COUNT(*) FILTER (WHERE status = 'Waiting') as \"total_waiting\", COUNT(*) FILTER (WHERE status = 'Called') as \"total_called\", COUNT(*) FILTER (WHERE status = 'Done') as \"total_done\", COUNT(*) FILTER (WHERE status = 'Cancelled') as \"total_cancelled\", COUNT(*) FILTER (WHERE queue_type = 'Reservasi') as \"total_reservation\", COUNT(*) FILTER (WHERE queue_type = 'Walk-In') as \"total_walkin\", \n      AVG(EXTRACT(EPOCH FROM (completed_at - called_at))/60) \n      FILTER (WHERE completed_at IS NOT NULL AND called_at IS NOT NULL)\n     as \"avg_service_time_minutes\", NOW() as \"last_updated\" from \"queues\" where DATE(created_at) = CURRENT_DATE",
      "name": "dashboard_summary",
      "schema": "public",
      "isExisting": false,
      "materialized": true
    },
    "public.hourly_queue_distribution": {
      "columns": {},
      "definition": "select EXTRACT(HOUR FROM created_at) as \"hour\", COUNT(*) FILTER (WHERE queue_type = 'Reservasi') as \"total_reservation\", COUNT(*) FILTER (WHERE queue_type = 'Walk-In') as \"total_walkin\", COUNT(*) as \"total_queues\", \n      AVG(EXTRACT(EPOCH FROM (completed_at - called_at))/60) \n      FILTER (WHERE completed_at IS NOT NULL)\n     as \"avg_processing_minutes\" from \"queues\" where DATE(created_at) = CURRENT_DATE group by EXTRACT(HOUR FROM created_at) order by hour",
      "name": "hourly_queue_distribution",
      "schema": "public",
      "isExisting": false,
      "materialized": true
    },
    "public.queue_stats_by_staff": {
      "columns": {},
      "definition": "select {staff.id} as \"staff_id\", {staff.code} as \"staff_code\", {staff.name} as \"staff_name\", COUNT(*) FILTER (WHERE \"queues\".\"status\" = 'Waiting') as \"total_waiting\", COUNT(*) FILTER (WHERE \"queues\".\"status\" = 'Called') as \"total_called\", COUNT(*) FILTER (WHERE \"queues\".\"status\" = 'Done') as \"total_done\", COUNT(*) as \"total_queues\", \n          AVG(EXTRACT(EPOCH FROM (COALESCE(\"queues\".\"called_at\", NOW()) - \"queues\".\"created_at\"))/60)\n         as \"avg_waiting_time_minutes\", NOW() as \"last_updated\" from \"staff\" left join \"queues\" on \"queues\".\"staff_id\" = \"staff\".\"id\" AND DATE(\"queues\".\"created_at\") = CURRENT_DATE where \"staff\".\"is_active\" = true group by \"staff\".\"id\", \"staff\".\"code\", \"staff\".\"name\"",
      "name": "queue_stats_by_staff",
      "schema": "public",
      "isExisting": false,
      "materialized": true
    },
    "public.staff_performance": {
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "loket_number": {
          "name": "loket_number",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        }
      },
      "definition": "select \"staff\".\"id\", \"staff\".\"code\", \"staff\".\"name\" as \"staff_name\", \"staff\".\"loket_number\", \"clinics\".\"name\" as \"clinic_name\", COUNT(\"queues\".\"id\") as \"total_served\", \n      AVG(EXTRACT(EPOCH FROM (\"queues\".\"completed_at\" - \"queues\".\"called_at\"))/60)\n     as \"avg_service_time_minutes\", COUNT(\"queue_calls\".\"id\") as \"total_call_attempts\", MAX(\"queues\".\"completed_at\") as \"last_service_at\", NOW() as \"last_updated\" from \"staff\" left join \"clinics\" on \"staff\".\"clinic_id\" = \"clinics\".\"id\" left join \"queues\" on \"queues\".\"staff_id\" = \"staff\".\"id\" AND \"queues\".\"status\" = 'Done' AND DATE(\"queues\".\"created_at\") = CURRENT_DATE left join \"queue_calls\" on \"queue_calls\".\"queue_id\" = \"queues\".\"id\" where \"staff\".\"is_active\" = true group by \"staff\".\"id\", \"staff\".\"code\", \"staff\".\"name\", \"staff\".\"loket_number\", \"clinics\".\"name\" order by total_served DESC",
      "name": "staff_performance",
      "schema": "public",
      "isExisting": false,
      "materialized": true
    }
  },
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}